I"¢<p>layout: single
title: Redis Study Note - single ì¸ìŠ¤í„´ìŠ¤ ì„¤ì¹˜
date: 2016-09-17 14:53:32.000000000 +09:00
categories:</p>
<ul>
  <li>
    <p>system
tags: [redis]
author:
login: everydayminder
email: 2jhyun@gmail.com
display_name: everydayminder
first_name: â€˜â€™
last_name: â€˜â€™
â€”
Redis single instanceë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì¹˜í•´ ë³¸ë‹¤.</p>
  </li>
  <li>OS : CentOS 6.8 / VirtualBox</li>
  <li>Redis ë²„ì „ : 3.2.3</li>
</ul>

<p><strong>ê³µì‹ì‚¬ì´íŠ¸</strong>
Redis ê³µì‹ ì‚¬ì´íŠ¸ : http://redis.io</p>

<p><strong>ë‹¤ìš´ë¡œë“œ</strong>
2016/9/16í˜„ì¬ ìµœì‹  stableë²„ì „ì¸ 3.2ë¥¼ ë‹¤ìš´ë¡œë“œ í•œë‹¤.</p>

<p><strong>ì„¤ì¹˜</strong>
ê³µì‹ ì‚¬ì´íŠ¸ì— ì•ˆë‚´ëœ ë°”ì™€ ê°™ì´, ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ ì„¤ì¹˜ ê³¼ì • ìì²´ëŠ” ë¬´ì²™ ê°„ë‹¨í•˜ë‹¤.</p>

<p>http://download.redis.io/releases/redis-3.2.3.tar.gz</p>

<p>ì—ì„œ ë‹¤ìš´ë¡œë“œí•˜ê³ ,</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ tar xzf redis-3.2.3.tar.gz
$ cd redis-3.2.3
$ make
</code></pre></div></div>

<p>ì´ëŒ€ë¡œ ì„¤ì¹˜ë¥¼ ì§„í–‰í•˜ë©´, gccë¶€í„° ì‹œì‘í•˜ì—¬ ì—¬ëŸ¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì—†ë‹¤ê³  ì¤„ì¤„ì´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
README.mdíŒŒì¼ì„ ì½ì–´ë³´ë©´, ì˜ì¡´ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ deps ë””ë ‰í† ë¦¬ì— ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
ì¼ë‹¨ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•œë‹¤. (ì¶”í›„ ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ë„ í•„ìš”í•  ê²ƒ ê°™ì•„, ì¼ë‹¨ epel-releaseë„ í•¨ê»˜ ì„¤ì¹˜í•˜ì˜€ë‹¤.)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ yum install epel-release
$ yum install gcc
</code></pre></div></div>

<p>ì„¤ì¹˜ì‹œ ì˜ì¡´ì„± ë¬¸ì œê°€ ë°œìƒí•˜ë©´, ì•„ë˜ì™€ ê°™ì´ ì´ˆê¸°í™”í•˜ê³  ë‹¤ì‹œ ì„¤ì¹˜í•´ ë³¸ë‹¤.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make distclean
</code></pre></div></div>

<p>ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë¥¼ ë§ˆì³¤ë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì€ ë©”ì‹œì§€ê°€ ëˆˆì— ëŒ ê²ƒì´ë‹¤.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hint: It's a good idea to run 'make test' ;)
</code></pre></div></div>
<p>í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ë³´ë©´, ì´ë²ˆì—ëŠ” tclì„ ì„¤ì¹˜í•˜ë¼ê³  í•œë‹¤.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ yum install tcl
</code></pre></div></div>
<p>tclì„ ì„¤ì¹˜ í›„, ì´ì œ make testë¥¼ ì‹¤í–‰í•˜ë©´</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make test
</code></pre></div></div>
<p>ìˆ˜ë§ì€ í…ŒìŠ¤íŠ¸ë¥¼ ì•Œì•„ì„œ ìˆ˜í–‰í•œë‹¤.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Execution time of different units:
  1 seconds - unit/type/incr
  1 seconds - unit/printver
  2 seconds - unit/auth
  2 seconds - unit/keyspace
  0 seconds - unit/quit
  3 seconds - unit/scan
  2 seconds - unit/multi
  7 seconds - unit/protocol
  11 seconds - unit/expire
  23 seconds - unit/type/list
  11 seconds - integration/aof
  4 seconds - integration/rdb
  3 seconds - integration/convert-zipmap-hash-on-load
  2 seconds - integration/logging
  1 seconds - unit/pubsub
  2 seconds - unit/slowlog
  46 seconds - unit/aofrw
  51 seconds - unit/other
  1 seconds - unit/introspection
  57 seconds - unit/type/hash
  2 seconds - unit/limits
  58 seconds - integration/replication
  7 seconds - unit/introspection-2
  19 seconds - unit/scripting
  10 seconds - unit/bitfield
  72 seconds - unit/type/string
  81 seconds - unit/type/set
  38 seconds - unit/bitops
  96 seconds - integration/replication-2
  102 seconds - unit/type/zset
  63 seconds - unit/maxmemory
  117 seconds - unit/dump
  127 seconds - unit/sort
  58 seconds - unit/memefficiency
  121 seconds - integration/replication-psync
  86 seconds - unit/geo
  156 seconds - unit/type/list-2
  159 seconds - unit/type/list-3
  155 seconds - integration/replication-4
  160 seconds - integration/replication-3
  92 seconds - unit/hyperloglog
  114 seconds - unit/obuf-limits

\o/ All tests passed without errors!

Cleanup: may take some time... OK
</code></pre></div></div>

<p>makeê¹Œì§€ ì„±ê³µí–ˆìœ¼ë©´ src/redis-serverë¡œ ì‹¤í–‰ê°€ëŠ¥í•œ ìƒíƒœê°€ ë˜ì—ˆì„ ê²ƒì´ë‹¤.
ì•„ë˜ì™€ ê°™ì´ ì‹¤í–‰í•˜ë©´, /usr/local/binì— redis-server, cli íŒŒì¼ ë“±ì´ ë³µì‚¬ëœë‹¤.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make install
</code></pre></div></div>

<p>í™˜ê²½ì„¤ì • íŒŒì¼ ë“±ì˜ ì ˆì°¨ë¥¼ ì‰½ê²Œ í•˜ë„ë¡, utils/install_server.shë¥¼ ì‹¤í–‰í•œë‹¤.
í¬íŠ¸, ë¡œê·¸ ìœ„ì¹˜, configì— ê´€ë ¨ëœ ì •ë³´/ ìœ„ì¹˜ì— ëŒ€í•´ ë¬¼ìœ¼ë‚˜, ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ ëª¨ë‘ ê·¸ëŒ€ë¡œ enterë¥¼ ì³¤ê³ ,
executableì˜ ìœ„ì¹˜ëŠ” ë‹¤ë¥¸ ê°€ì´ë“œì— ë‚˜ì˜¨ëŒ€ë¡œ ê¸°ë³¸ ì¸ì‹ì´ ë˜ì§€ ì•Šì•„, /usr/local/bin/redis-serverë¥¼ ì§ì ‘ ì…ë ¥í•˜ì˜€ë‹¤.</p>

<p>redis ê¸°ë³¸ í¬íŠ¸ê°€ 6379ë¼, /etc/init.d/redis_6379 íŒŒì¼ì´ ìƒì„±ë˜ì—ˆë‹¤.
ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘/ ì •ì§€ì‹œí‚¬ ìˆ˜ ìˆë‹¤.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ service redis_6379 start
$ service redis_6379 stop
</code></pre></div></div>

<p>redisê°€ ì •ìƒì ìœ¼ë¡œ ë–  ìˆëŠ” ìƒíƒœë¼ë©´,</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ps -ef | grep redis

root     22694     1  0 00:25 ?        00:00:05 /usr/local/bin/redis-server 127.0.0.1:6379
</code></pre></div></div>
<p>ì´ì œ, redis clientë¡œ ì ‘ì†í•˜ë©´,</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ /usr/local/bin/redis-cli
127.0.0.1:6379&amp;gt;
</code></pre></div></div>
<p>ì™€ ê°™ì´ ì ‘ì† ìƒíƒœê°€ ì•ˆë‚´ë˜ê³ , ë‹¤ìŒê³¼ ê°™ì´ ê¸°ë³¸ ë™ì‘ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>27.0.0.1:6379&amp;gt; set test 1234
OK

127.0.0.1:6379&amp;gt; set name &amp;quot;abc def&amp;quot;
OK

127.0.0.1:6379&amp;gt; exists name
(integer) 1

127.0.0.1:6379&amp;gt; get name
&amp;quot;abc def&amp;quot;

127.0.0.1:6379&amp;gt; get test
&amp;quot;1234&amp;quot;
</code></pre></div></div>

:ET