I"İ<p>hibernateë¥¼ ì‚¬ìš©í•˜ëŠ” ë„ì¤‘, DB connectionì´ ëŠê¸´ë‹¤ë©´?
DB connectionì´ ê³„ì† ìœ ì§€ë˜ë„ë¡ í•˜ë ¤ë©´, ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ ì£¼ê¸°ì ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•  ê²ƒì´ë‹¤.
dummy queryë¥¼ ì‹¤í–‰ì‹œì¼œì„œ connection ìì²´ë¥¼ ìœ ì§€ì‹œí‚¤ë©´ ë˜ëŠ”ë°, connection pool libraryì¸ c3p0ì—ì„œëŠ” ì´ë¥¼ ì˜µì…˜ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ ê°€ì´ë“œí•œë‹¤.</p>

<p>hibernateì—ì„œëŠ” ì´ ì†ì„±ë“¤ì„ ê·¸ëŒ€ë¡œ ì„ ì–¸í•˜ì—¬ connectionì„ ìœ ì§€ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
ë°”ë¡œ c3p0.timeoutê³¼ c3p0.idle_test_period ê°’ì´ë‹¤.</p>

<p>jbossì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì•ˆë‚´í•œë‹¤.</p>

<blockquote>
idleTestPeriod Must be set in hibernate.cfg.xml (or hibernate.properties), Hibernate default: 0
If this is a number greater than 0, c3p0 will test all idle, pooled but unchecked-out connections, every this number of seconds.
timeout Must be set in hibernate.cfg.xml (or hibernate.properties), Hibernate default: 0
The seconds a Connection can remain pooled but unused before being discarded. Zero means idle connections never expire
</blockquote>

<p>ì‚¬ì‹¤, ê°œë°œìë“¤ì´ ì£¼ê³  ë°›ì€ Q&amp;Aê°€ ë” ìœ ìš©í•œë°, StackOverFlowì— ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ë“¤ì´ ê³µìœ ë˜ì–´ ìˆì—ˆë‹¤.</p>

<blockquote>

The database server may close a connection on its side after a certain amount of time - causing some error in your application, because it'll attempt to send a query on a connection which is no longer available on the server side.

In order to avoid this you can let the pool periodically check a connection (Think of a ping) for it's validity. This is what idle_test_period is for.
timeout is the timespan after which the pool will remove a connection from the pool, because the connection wasn't checked out (used) for a while and the pool contains more connections than c3pO.min_size.

<a href="http://stackoverflow.com/questions/10175957/the-use-of-c3p0-idle-test-period">http://stackoverflow.com/questions/10175957/the-use-of-c3p0-idle-test-period</a>

</blockquote>

<p>ì‚¬ì‹¤ ì¢€ë” ëŒë¦¬ëŠ” ì„¤ëª…ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<blockquote>
Actually this is probably too late, but the problem is quite simple: hibernate.c3p0.idle_test_periods must not be higher than hibernate.c3p0.timeout or connections closed by the database will not be properly detected.

Moreover, the deadlock detection warnings look like some part of your code is not properly returning the connections to the pool (i.e. session.close())
The MysqlIO exceptions occur when your application idles and MySQL closes the connection on the server. Now if C3P0 does not properly check whether a connection is still actually connected you get the EOFExceptions.

I hope this might be helpful.

<a href="http://stackoverflow.com/questions/475893/what-are-the-required-c3p0-settings-for-hibernate-in-order-to-avoid-deadlocks">http://stackoverflow.com/questions/475893/what-are-the-required-c3p0-settings-for-hibernate-in-order-to-avoid-deadlocks</a>
</blockquote>

<p>â€œëŠê¸°ê¸° ì „ì— ì£¼ê¸°ì ìœ¼ë¡œ connection ìœ ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•  ê²ƒ.â€</p>

:ET